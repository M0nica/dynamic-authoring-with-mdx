<SlidePage>

<Cover>

# Dynamic Authoring with MDX üìù

Monica Powell &bull; Apollo Day &bull; November 2020

</Cover>

---

# Hi, I'm Monica üëãüèæ

I'm a software engineer who is passionate about making contributing to open-source more approachable, creating technology to elevate people, and building community. I am excited to share how you can super-charge content creation with MDX.

<img
  style={{ maxWidth: "20%", textAlign: "center", display: "inline" }}
  src="/animonica.png"
/>

<SpeakerNotes>
  {" "}
  I'm Monica! I'm a software engineer and community organizer. I'm passionate
  about making technology, like open-source, more accessible and created a
  Meetup group, React Ladies for women and non-binary react developers.
</SpeakerNotes>

---

## MDX is "JSX in Markdown for ambitious projects"

<img style={{ maxWidth: "80%", textAlign: "center" }} src="/mdx-jsmdx.png" />

<SpeakerNotes>

First, you may be wonder what is MDX? At the simplest level it's a programming syntax that supports writing JSX in Markdown.

MDX brands itself as "JSX in Markdown for ambitious projects".

</SpeakerNotes>

---

# But, what is MDX?

- MDX can refer to either the syntax _or_ library
- The MDX _library_ converts MDX _syntax_ ‚û° JSX
- JSX is compiled by Babel/Webpack for browser

<SpeakerNotes>
  You can refer to MDX as the library that converts MDX syntax to JSX or as the
  syntax that is written. MDX is converted into JSX which is ultimately compiled
  for browser by tools like Babel or Webpack.
</SpeakerNotes>

---

# Why MDX?

<Callout variant="plain">
  strong authoring experience for technical contributors
</Callout>
<Callout variant="plain">
  seamlessly import React components into MDX files
</Callout>

<Callout variant="plain">

create more engaging, interactive content with the ease of markdown

</Callout>

<SpeakerNotes>
  I started using MDX after hearing other developers talk about the enhanced
  functionality that MDX can add to websites. I was especially interested in
  exploring MDX for creating engaging and interactive content after seeing fun
  examples of content that resonated with me that used MDX.
</SpeakerNotes>

---

# MDX Example: <ArticleList/> in Article

- site programmatically passes data into `<Articlelist/>` from the result of a GraphQL query
- article uses hard-coded data (R) within a `.mdx` file to render the below instance of the `<ArticleList/>` component (L):

<a href="https://www.aboutmonica.com/blog/how-to-render-relevant-icons-based-on-content">
  <img
    style={{ maxWidth: "80%", textAlign: "center" }}
    src="/mdx-in-blog-example.png"
  />
</a>

---

# MDX Example: Third-Party Embeds

`<CodePen codePenId="jObpJma" tabs={["css", "result"]} />`

<CodePen codePenId="jObpJma" tabs={["css", "result"]} />

_Above embed powered by `mdx-embed`_.

<SpeakerNotes>
  For example here within an article written in Markdown I used an embed plugin
  to display a Codepen pen
</SpeakerNotes>

---

# Using MDXProvider

- centralized place to pass components that wraps layout pages

```js
import React from "react";
import { MDXProvider } from "@mdx-js/react";
import { SignUp, TableOfContents } from "./components";

const components = {
  Signup,
  TableOfContents,
};

export default (props) => (
  <MDXProvider components={components}>
    <main {...props} />
  </MDXProvider>
);
```

<SpeakerNotes>
  The first thing I needed to do before using MDX was wrapping the MDXProvider
  around my blog post template since I wanted MDX to be available for all of my
  articles. The MDXProvider allows you to pass the components you want to be
  available to all of the pages that are within that context in one place. This
  provider wraps both my post content.
</SpeakerNotes>

---

# Table of Contents Component

<img
  style={{ maxWidth: "40%", textAlign: "center" }}
  src="/table-of-contents-visual.png"
/>

<SpeakerNotes>
  For my longer articles I like to add a table of contents so that readers can
  view an overview of what to expect in a particular article.
</SpeakerNotes>

---

# TOC: Before/After MDX

<img style={{ maxWidth: "80%", textAlign: "center" }} src="/toc-diff.png" />

<SpeakerNotes>
  I liked adding these so much that I was manually writing Markdown to render
  table of contents within my articles. Here's a diff of what the Table of
  Contents for individual posts looked like before and after MDX. After
  implementing MDX, adding table of contents is just a one line reference to a
  component.
</SpeakerNotes>

---

# TableOfContents.jsx

```jsx
import "./TableOfContents.scss";
function TableOfContents({ headings }) {
  return (
    <div className="table-of-contents">
      <h2>Table of Contents</h2>
      <ul>
        {headings.items &&
          headings.items.map((item) => (
            <li key={item.url}>
              <a href={item.url}>{item.title}</a>{" "}
            </li>
          ))}
      </ul>
    </div>
  );
}
```

<SpeakerNotes>
  In order to reduce the amount of TOC that lives in an individual blog post I
  created a Table of Contents JSX component to map through all of the headers
  and display them as list items with links. There's an autolink plugin to
  ensure the anchor link exists. The headings are being passed in from the
  TableOfContents data field which has a headings attribute.
</SpeakerNotes>

---

# ArticleTemplate.jsx

```jsx
import { MDXProvider } from "@mdx-js/react";
import { MDXRenderer } from "gatsby-plugin-mdx";
import TableOfContents from "../components/TableOfContents";

const components = {
  TableOfContents,
};

class BlogPostTemplate extends React.Component {
  render() {
    const post = this.props.data.mdx;
    if (!post) return null;

    return (
      <MDXProvider components={components}>
        <MDXRenderer tableOfContents={post.tableOfContents}>
          {post.body}
        </MDXRenderer>
      </MDXProvider>
    );
  }
}

export const pageQuery = graphql`
  query BlogPostBySlug($slug: String!, $permalink: String!) {
    mdx(fields: { slug: { eq: $slug } }) {
      id
      timeToRead
      body
      tableOfContents
      frontmatter {
        title
        date(formatString: "MMMM DD, YYYY")
      }
    }
  }
`;
```

<SpeakerNotes>
  I then imported the new Table of Contents component into the MDX provider in
  my article template, so that this component is accessible to any blog posts.
  In Gatby applications you also need to import an MDXRenderer which is a React
  component from the MDX Gatsby integration that takes compiled MDX content and
  renders it. It's required if your MDX content is coming from a GraphQL page
  query or StaticQuery. I also updated the post query to pass in the
  tableOfContents field for that post as a prop that can then be passed into the
  TableOfContents components. The TableOfContents field is a default available
  with the Gatsby MDX configuration. The TableOfContents field also allows you
  to pass in a depth tot pull in subheadings. For my use case I only cared about
  the first layer but the TOC component can be set up to recursively render all
  of the headings and subheadings.
</SpeakerNotes>{" "}

---

# Callout Banners

<Callout>Here's some important information for you to know!</Callout>
<Callout variant="danger">Oops, there was an error</Callout>
<Callout variant="garden">
  That's all for now! ü•ï I am continuing to update this post, so check back
  later!
</Callout>
<Callout variant="book">
  "Here's a great quote from something I read recently.
</Callout>

Inspired by http://prince.dev/ üíú

<SpeakerNotes>
  Something cool I saw around the web was folks using Callout banners to make
  certain content stand out. I had a similar style already for a markdown quote
  on my blog and was eager to extend the different styles of callouts I could
  include in content so I created a Callout component.
</SpeakerNotes>

---

# Markdown Quote -> Callout.jsx

```
> Markdown quote
```

to

```jsx
<>
  <Callout>...</Callout>
  <Callout variant="danger">...</Callout>
  <Callout variant="garden">...</Callout>
  <Callout variant="book">...</Callout>
</>
```

<SpeakerNotes>
  So now in addition to being able to add quotes within blog posts, I can also
  add different variations of the banner by using the Callout component.
</SpeakerNotes>

---

# Callout Banners

<Callout>Here's some important information for you to know!</Callout>
<Callout variant="danger">Oops, there was an error</Callout>
<Callout variant="garden">
  That's all for now! ü•ï I am continuing to update this post, so check back
  later!
</Callout>
<Callout variant="book">
  "Here's a great quote from something I read recently.
</Callout>

<SpeakerNotes> Show the visual callouts again </SpeakerNotes>

---

# Callout.jsx Variants

```jsx
const variantStyles = {
  info: {
    borderLeft: "4px solid #b4aaff",
    backgroundColor: "rgba(224, 226, 255, 0.5)",
    color: "#2a2135",
  },
  danger: {
    borderLeft: "4px solid #ff7828",
    backgroundColor: "rgb(253, 236, 234)",
  },
  garden: {
    borderLeft: "4px solid #72bc23",
    backgroundColor: "rgb(249, 253, 234)",
  },
  book: {
    borderLeft: "4px solid #44a9ba",
    backgroundColor: "rgb(234, 248, 253);",
  },
};
```

<SpeakerNotes>
  For each variation there are different styles for borderLeft and
  backgroundColor that are based off of the variant that is passed in. In the
  component it also adds CSS classnames based on the variant prop.
</SpeakerNotes>

---

# Callout.jsx

```jsx
/* CSS file for pseudoclasses a.k.a emojis */
import styles from "./callout.module.scss"
export default function Callout({ variant = "info", children }) {
  const classes = `${styles.infoBox} ${styles[variant]}`;
  const variantStyles = {
    ...
  };
  return (
    <aside css={{ /* a bunch of default CSS*/ ...variantStyles[variant],
      }} className={classes} >
      {children}
    </aside>
  );
}
```

<SpeakerNotes>
  The Callout component also has a CSS Module file for the psuedoclasses to show
  the emojis before each callout based on the CSS classname that was appended
  from the variant prop.
</SpeakerNotes>

---

# Example: Timer

Add a timer or a countdown into a markdown file with the following:

`<CountDown minutes="1" seconds="30" />`

## <CountDown minutes="1" seconds="30" />

---

# Summary

- MDX provides a better developer experience tocustomize content written in Markdown (i.e, adding new types of Callouts, more flexible code snippets)

<img style={{ maxWidth: "80%", textAlign: "center" }} src="/toc-diff.png" />

---

# Resources

- https://storybook.js.org/docs/react/writing-docs/mdx

- https://nickymeuleman.netlify.app/blog/table-of-contents#nested-heading-levels
- https://prince.dev/callout

* https://www.mdx-embed.com/
* https://github.com/FormidableLabs/prism-react-renderer

- https://github.com/whoisryosuke/next-mdx-deck

---

# Thank you üëãüèæ!

www.aboutmonica.com &bull; <a href="https://twitter.com/waterproofheart">@waterproofheart</a>

</SlidePage>
